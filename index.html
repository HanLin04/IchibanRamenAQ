<!-- index.html -->
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Ichiban Ramen - Turnos</title>
  <style>
    body { font-family: sans-serif; text-align: center; padding: 2rem; }
    button { padding: 1rem 2rem; font-size: 1.2rem; margin-top: 1rem; }
  </style>
</head>
<body>
  <h1>Bienvenido a Ichiban Ramen</h1>
  <h2 id="myNumberDisplay"></h2>
  <button onclick="getNumber()">¡Tomar un turno!</button>
  <p id="status"></p>

  <script>
    let myNumber = localStorage.getItem("myNumber");

    function getNumber() {
      const queue = JSON.parse(localStorage.getItem("queue") || "[]");
      const newNumber = queue.length > 0 ? queue[queue.length - 1] + 1 : 1;
      queue.push(newNumber);
      localStorage.setItem("queue", JSON.stringify(queue));
      localStorage.setItem("myNumber", newNumber);
      myNumber = newNumber;
      displayNumber();
    }

    function displayNumber() {
      if (myNumber) {
        document.getElementById("myNumberDisplay").textContent = "Tu número: " + myNumber;
      }
    }

    function checkStatus() {
      const current = parseInt(localStorage.getItem("current") || "0");
      if (myNumber) {
        if (current === parseInt(myNumber)) {
          document.getElementById("status").textContent = "¡Es tu turno! Por favor, acércate.";
        } else if (current > myNumber) {
          document.getElementById("status").textContent = "Tu turno ha expirado.";
        } else {
          document.getElementById("status").textContent = "Esperando... Turno actual: " + current;
        }
      }
    }

    displayNumber();
    setInterval(checkStatus, 2000);
  </script>
</body>
</html>

